# Quick Start

Use the **[project creator](https://photonprojectcreator.web.app)** to get a basic photon project.

Or use the **[template repository](https://github.com/photon-framework/template)**.

Or create it by yourself:

### Use npm or yarn to import the library.

```bash
yarn add photon-re
yarn add -D photon-cli
```

### Create your index.html boilerplate (nothing special here)

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Photon</title>
  </head>
  <body></body>
</html>
```

### Add a router to the body

```html
<main
  id="root"
  photon-router
  data-content="/content"
  data-default="/en/home"
  data-fallback="/404"
></main>
```

- `photon-router` activates the router functionality for this element (only one allowed!).
- `data-content` is the location of the subpages that should get injected into the router.
- `data-default` is loaded if no path (for a subpage) is given in the url.
- `data-fallback` is loaded if the the subpage specified by the url was not found. Server Setup is needed.

### Add anchors for navigation to the body

```html
<nav>
  <a data-route="info">Info</a>
  <a data-route="portfolio">Portfolio</a>
  <a data-route="links">Links</a>
</nav>
```

href attributes are generated by the cli tool!

- `data-route` specifies the name of the subpage that should be loaded on click.

### Import core module from the runtime

```html
<script defer type="module" src="../node_modules/photon-re/core.js"></script>
```

### Combined

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Photon</title>
  </head>
  <body>
    <nav>
      <a data-route="info">Info</a>
      <a data-route="portfolio">Portfolio</a>
      <a data-route="links">Links</a>
    </nav>
    <main
      id="root"
      photon-router
      data-content="/content"
      data-default="/en/home"
      data-fallback="/404"
    ></main>
    <script
      defer
      type="module"
      src="../node_modules/photon-re/core.js"
    ></script>
  </body>
</html>
```

### Build

Run your bundler (like Parcel or WebPack) first. 
Then run the cli tool, parameter is the entry point (e.g. `index.html`) or the folder, where a `index.html` is located.
photon-cli will modify the files, so only execute it once after the build!

```
yarn parcel build 'src/index.html' 'src/**/*.html'
yarn photon ./dist/index.html
```

#### CI/CD GitHub Actions example

```yaml
# https://github.com/Frank-Mayer/homepage/blob/main/.github/workflows/firebase-hosting-merge.yml

name: CI
"on":
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - uses: actions/setup-node@v2
        with:
          node-version: 17
          cache: "yarn"
      - run: yarn
      - run: yarn parcel build 'src/index.html' 'src/**/*.html' --no-source-maps --no-cache
      - run: yarn photon './dist'

      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: "${{ secrets.GITHUB_TOKEN }}"
          firebaseServiceAccount: "${{ secrets.FIREBASE_SERVICE_ACCOUNT_FRANK_MAYER_A131A }}"
          channelId: live
          projectId: frank-mayer-a131a
```


### For special functionalities import from the runtime

```typescript
import { addRoutingEventListener } from "photon-re";

addRoutingEventListener(
  "routed",
  (ev: RoutedEvent) => {
    // print out the new route on a "routed" event
    console.debug(ev.detail.route);
  },
  {
    passive: true,
  }
);
```
